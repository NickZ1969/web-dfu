<!DOCTYPE html>
<html>
  <head>
    
    <title>Everything Fuel Injection Firmware ini files</title>
    <script src="dfu.js"></script>
    <script src="dfuse.js"></script>
    <script src="FileSaver.js"></script>
    <script src="dfu-util.js"></script>
      <script>
        async function loadFiles() {
            try {
                const response = await fetch('https://api.github.com/repos/NickZ1969/Speeduino_ini_files/contents');
                const data = await response.json();
                const files = data.map(file => file.name);
                const fileListDiv = document.getElementById('fileList');
                fileListDiv.innerHTML = '<h2>STM Pro ECU ini Files:</h2>';
                files.forEach(file => {
                    const fileLink = `https://raw.githubusercontent.com/NickZ1969/Speeduino_ini_files/master/${file}`;
                    fileListDiv.innerHTML += `<p><a href="${fileLink}" download>${file}</a></p>`;
                });
            } catch (error) {
                console.error('Error fetching files:', error);
            }
        }

        // Automatically load files when the page is opened
        window.onload = loadFiles;
    </script>
    <link rel="stylesheet" href="/styles.css">
    <style>
      p.warning {
        color: red;
      }
      p.error {
        color: red;
        font-weight: bold;
      }
      label.radio {
        display: inline;
      }
      input:invalid {
        color:red;
      }
          #fileList {
        margin-top: 20px;
    }
    </style>
  </head>
  <body>
      <div id="fileList"></div>
      <span id="status"></span>
    </p>
    <p>Click the ini file above to download, you may need to right click and "save link as"</p>
    <br>

    <h1>About</h1>
    <p>
      This is a proof-of-concept demo of host <a href="http://wiki.openmoko.org/wiki/USB_DFU">USB DFU</a> drivers in Javascript utilizing the <a href="https://wicg.github.io/webusb/">WebUSB</a> draft standard to implement USB firmware updates from the browser.
    </p>
  </body>
</html>
